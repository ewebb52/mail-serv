# Cert-Authority (CA)
Maria Kogan (mk4036)

## Files
```
4181/cert-authority/init/*          # all configuration files for 2a-2d and all tests
4181/cert-authority/                # all scripts files including test files
4181/cert-authority/test            # files served by server to client
README.md                           # This file, explaining the project
```
## Testing Environment
Each test `x` generates verification error `x` via the following scripts: 
```
test-x-init.sh         # configurates CA, produces tampered data (e.g. certificates)
test-x-server.sh       # creates a server accepting clients on some port
test-x-client.sh       # connects to the server on the given port
```
Therefore, if we are running scripts 
```
test-7-init.sh         
test-7-server.sh       
test-7-client.sh        
```
We are expecting to generate verification error `num=7: certificate signature failure`

## To Test
In terminal window `A`
```
cd $HOME/4181/cert-authority/
./test-x-init.sh
./test-x-server.sh
```
In terminal window `B`
```
cd $HOME/4181/cert-authority/
./test-x-client.sh
```
For the tests, all passwords, common names, and additional unique attributes are hard-coded for testing purposes, as discussed at office hours to ensure simplicity of testing. Of course, passwords would not be hardcoded in *any* other scenario.
When running tests, we request that no input is provided. Test scripts depend on usage of default common names indicated in the configuration files. When testing, all that is necessary of the user is hitting "enter" when approving default configuration data and hitting `y` when the certificate authority requests approval for any given action.

*Note: there is one exception. The script series*
```
test-20s-21c-init.sh         
test-20s-21c-server.sh       
test-20s-21c-client.sh        
```
Generates error `20` on the server side and `21` on the client side, although both unique errors are generated by the decision to not provide the certificate chain to the server. Thus, this individual test is 


## Achieved Error Codes
- `num=0:  ok`
- `num=10: certificate has expired`
- `num=18: self signed certificate`
- `num=2:  unable to get issuer certificate`
- `num=20: unable to get local issuer certificate`
- `num=7:  certificate signature failure`
- `num=9:  certificate is not yet valid`
- `num=21:  unable to verify the first certificate`
- `num=26:unsupported certificate purpose`

## Certificate Authority Types
A web server certificate
```
./run-cert-authority.sh
./sign-server.sh 
```
A client certificate
```
./run-cert-authority.sh
./sign-client.sh 
```
A certificate suitable for others to use when encrypting files to you
```
./cert-authority-2c.sh  
```
A certificate suitable for signing files, including encrypted files
```
./cert-authority-2d.sh  
```
